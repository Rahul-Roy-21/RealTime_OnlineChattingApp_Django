<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <title>Hello, world!</title>
    <style>
        body {
            margin-top: 20px;
        }

        .chat-online {
            color: #34ce57
        }

        .chat-offline {
            color: #e4606d
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            max-height: 800px;
            overflow-y: scroll;
        }

        .chat-message-left,
        .chat-message-right {
            display: flex;
            flex-shrink: 0
        }

        .chat-message-left {
            margin-right: auto
        }

        .chat-message-right {
            flex-direction: row-reverse;
            margin-left: auto;
        }
        
        .py-3 {
            padding-top: 1rem !important;
            padding-bottom: 1rem !important;
        }

        .px-4 {
            padding-right: 1.5rem !important;
            padding-left: 1.5rem !important;
        }

        .flex-grow-0 {
            flex-grow: 0 !important;
        }

        .border-top {
            border-top: 1px solid #dee2e6 !important;
        }
    </style>
</head>

<body class="border border-3 mx-auto my-2" style="max-width: 70vw; min-width: 400px;">

    <div>
        <div class="py-2 px-4 border-bottom">
            <div class="d-flex align-items-center py-1">
                <div class="position-relative">
                    <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                        alt="Sharon Lessman" width="40" height="40">
                </div>
                <div class="flex-grow-1 pl-3">
                    <strong>Sharon Lessman</strong>
                    <div class="text-muted small"><em>Typing...</em></div>
                </div>
                <div>
                    <button class="btn btn-primary btn-lg mr-1 px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone feather-lg">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg></button>
                    <button class="btn btn-info btn-lg mr-1 px-3 d-none d-md-inline-block"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-video feather-lg">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg></button>
                    <button class="btn btn-light border btn-lg px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-horizontal feather-lg">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="19" cy="12" r="1"></circle>
                            <circle cx="5" cy="12" r="1"></circle>
                        </svg></button>
                </div>
            </div>
        </div>

        <div class="position-relative">
            <div class="chat-messages p-4">

                <div class="chat-message-right pb-4">
                    <div>
                        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1"
                            alt="Chris Wood" width="40" height="40">
                        <div class="text-muted small text-nowrap mt-2">2:33 am</div>
                    </div>
                    <div class="flex-shrink-1 rounded py-2 px-3 mx-2" style="background-color: #d8f9fa; border-left: 2px solid teal;">
                        <div class="font-weight-bold mb-1">You</div>
                        Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
                    </div>
                </div>

                <div class="chat-message-left pb-4">
                    <div>
                        <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                            alt="Sharon Lessman" width="40" height="40">
                        <div class="text-muted small text-nowrap mt-2">2:34 am</div>
                    </div>
                    <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3" style="border-right: 2px solid lightgrey;">
                        <div class="font-weight-bold mb-1">Sharon Lessman</div>
                        Sit meis deleniti eu, pri vidit meliore docendi ut, an eum erat animal commodo.
                    </div>
                </div>

            </div>
        </div>

        <div class="flex-grow-0 py-3 px-4 border-top">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Type your message">
                <button class="btn btn-primary">Send</button>
            </div>
        </div>

    </div>



    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

</body>

</html>


<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <title>Hello, world!</title>
    <style>
        body {
            margin-top: 20px;
        }

        .chat-online {
            color: #34ce57
        }

        .chat-offline {
            color: #e4606d
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            max-height: 800px;
            overflow-y: scroll;
            background-color: #81f9ff;
        }

        .chat-message-left,
        .chat-message-right {
            display: flex;
            flex-shrink: 0
        }

        .chat-message-left {
            margin-right: auto
        }

        .chat-message-right {
            flex-direction: row-reverse;
            margin-left: auto;
        }

        .py-3 {
            padding-top: 1rem !important;
            padding-bottom: 1rem !important;
        }

        .px-4 {
            padding-right: 1.5rem !important;
            padding-left: 1.5rem !important;
        }

        .flex-grow-0 {
            flex-grow: 0 !important;
        }

        .border-top {
            border-top: 1px solid #dee2e6 !important;
        }
    </style>
    <script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    
</head>

<body class="border border-3 mx-auto my-2" style="max-width: 70vw; min-width: 400px;">

    <div>
        <div class="py-2 px-4 border-bottom">
            <div class="d-flex align-items-center py-1">
                <div class="position-relative">
                    <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                        alt="Sharon Lessman" width="40" height="40">
                </div>
                <div class="flex-grow-1 pl-3">
                    <strong>Sharon Lessman</strong>
                    <div class="text-muted small"><em>Typing...</em></div>
                    <!-- <h4>Room Id: {{r.id}}</h4>
                    <h4>Room-Link: {{r.room_id}}</h4>
                    <h4>UserName: {{request.user.username}}</h4> -->

                </div>
                <div>
                    <button class="btn btn-primary btn-lg mr-1 px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone feather-lg">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg></button>
                    <button class="btn btn-info btn-lg mr-1 px-3 d-none d-md-inline-block"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-video feather-lg">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg></button>
                    <button class="btn btn-light border btn-lg px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-horizontal feather-lg">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="19" cy="12" r="1"></circle>
                            <circle cx="5" cy="12" r="1"></circle>
                        </svg></button>
                </div>
            </div>
        </div>

        <div class="position-relative">
            <div class="chat-messages p-4">
                <div class="mx-auto mb-1 alert-warning alert text-center">
                    <strong>Messages are end-to-end encrypted.No one outside of this chat would be able to see them..</strong>
                </div>

                <div class="chat-message-right my-1 pb-4">
                    <div>
                        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1"
                            alt="Chris Wood" width="40" height="40">
                        <div class="text-muted small text-nowrap mt-2">2:33 am</div>
                    </div>
                    <div class="flex-shrink-1 rounded py-2 px-3 mx-2" style="background-color: #d8f9fa; border-left: 2px solid teal; font-weight: 800;">
                        <div class="mb-1">You</div>
                        Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
                    </div>
                </div>

                <script>
                    $(document).ready(function () {

                        setInterval(function () {
                            $.ajax({
                                type: 'GET',
                                url: "/getMessages/{{r.room_id}}/",
                                success: function (response) {
                                    console.log(response.messages);
                                    $("#display").empty();

                                    
                                    for (var key in response.messages) {

                                        if (response.messages[key].lu_ref_id == Number('{{request.user.user_id}}')) {   
                                        
                                            var temp = '<div class="chat-message-right pb-4"><div><img src="https://bootdey.com/imgContent/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="60" height="60"><div class="text-muted small text-nowrap mt-2">' + response.messages[key].date + '</div></div><div class="flex-shrink-1 rounded py-2 px-3 mx-2" style="background-color: #d8f9fa; border-left: 2px solid teal;"><div class="font-weight-bold mb-1">You</div>' + response.messages[key].value + '</div></div>';
                                        }
                                        else {
                                            var temp = '<div class="chat-message-right pb-4"><div><img src="https://bootdey.com/imgContent/avatar/avatar1.png" class="rounded-circle mr-1" alt="Chris Wood" width="60" height="60"><div class="text-muted small text-nowrap mt-2">' + response.messages[key].date + '</div></div><div class="flex-shrink-1 rounded py-2 px-3 mx-2" style="border-right: 2px solid lightgrey;"><div class="font-weight-bold mb-1">Other</div>' + response.messages[key].value + '</div></div>';
                                        }

                                        $("#display").append(temp);
                                    }
                                },
                                error: function (response) {
                                    alert('An error occured')
                                }
                            });
                        }, 1000);
                    })
                </script>
                <!-- 
                <div class="chat-message-right pb-4">
                    <div>
                        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1"
                            alt="Chris Wood" width="40" height="40">
                        <div class="text-muted small text-nowrap mt-2">2:33 am</div>
                    </div>
                    <div class="flex-shrink-1 rounded py-2 px-3 mx-2"
                        style="background-color: #d8f9fa; border-left: 2px solid teal;">
                        <div class="font-weight-bold mb-1">You</div>
                        Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.
                    </div>
                </div>

                <div class="chat-message-left pb-4">
                    <div>
                        <img src="https://bootdey.com/img/Content/avatar/avatar3.png" class="rounded-circle mr-1"
                            alt="Sharon Lessman" width="40" height="40">
                        <div class="text-muted small text-nowrap mt-2">2:34 am</div>
                    </div>
                    <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3"
                        style="border-right: 2px solid lightgrey;">
                        <div class="font-weight-bold mb-1">Sharon Lessman</div>
                        Sit meis deleniti eu, pri vidit meliore docendi ut, an eum erat animal commodo.
                    </div>
                </div> -->
            </div>
        </div>
    </div>

    <div class="flex-grow-0 py-3 px-4 border-top">
        <form id="post-form">
            {% csrf_token %}
            <input type="hidden" name="username" id="username" value="{{username}}" />
            <input type="hidden" name="room_id" id="room_id" value="{{room_details.id}}" />
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Type your message" name="message" id="message">
                <button class="btn btn-primary" type="submit" value="Send">Send</button>
            </div>
        </form>
        <!-- 
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Type your message">
                <button class="btn btn-primary">Send</button>
            </div> -->
    </div>

    </div>



    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).on('submit', '#post-form', function (e) {
            e.preventDefault();

            $.ajax({
                type: 'POST',
                url: '/send',
                data: {
                    username: $('#username').val(),
                    room_id: $('#room_id').val(),
                    message: $('#message').val(),
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                },
                success: function (data) {
                    //alert(data)
                }
            });
            document.getElementById('message').value = ''
        });
    </script>
</body>

</html>


<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <title>Signin Template for Bootstrap</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sign-in/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <style>
        html,
        body {
            height: 100%;
            font-family: 'Sikta Text', 'Trebuchet MS', 'Lucida Sans', Arial, sans-serif;
        }

        body {
            display: -ms-flexbox;
            display: -webkit-box;
            display: flex;
            -ms-flex-align: center;
            -ms-flex-pack: center;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
            background-color: beige;
        }

        .form-signin {
            width: 100%;
            max-width: 470px;
            padding: 8px;
            margin: 0 auto;
        }

        .form-signin .form-control {
            margin: 13px 0;
            position: relative;
            box-sizing: border-box;
            height: auto;
            padding: 10px 15px;
        }

        .form-signin .form-control:focus {
            z-index: 2;
        }

        input {
            font-size: larger;
            border-bottom-right-radius: 0;
            border-bottom-left-radius: 0;
        }
    </style>
</head>

<body>
    <form class="form-signin" method="POST" action="/register">
        {% csrf_token %}
        <h1 class="h3 mb-3 text-center">Register Portal</h1>

        <label for="inputuser" class="sr-only">Username</label>
        <input type="text" id="inputuser" name="username" class="form-control" placeholder="Username" required
            autofocus>
        <label for="inputEmail" class="sr-only">Email Address</label>
        <input type="email" id="inputEmail" name="email" class="form-control" placeholder="Email Address" required>
        <div class="form-group row">
            <label for="exampleFormControlFile1" class=" mb-0 col-5">Upload a Profile Pic</label>
            <input type="file" class="form-control-file col-7" id="exampleFormControlFile1" name="dp">
        </div>
        <label for="inputPassword" class="sr-only">Password</label>
        <input type="password" id="inputPassword" name="password" class="form-control"
            placeholder="Password (min. 5 chars)" required>

        <label for="inputcPassword" class="sr-only">Confirm Password</label>
        <input type="password" id="inputcPassword" name="cpassword" class="form-control" placeholder="Confirm Password"
            required>

        <button class="btn btn-lg btn-primary btn-block" type="submit">Sign Up Now</button>
        <h5 class="my-3 text-decoration-none"><a href="/login">Have An Account? Please Login here..</a></h5>
        <!-- <p class="mt-3 mb-3 text-muted">Tech-World's &copy; 2020-2021</p> -->
    </form>

    
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>

</html>